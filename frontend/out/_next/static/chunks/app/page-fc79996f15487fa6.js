(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3520:function(e,t,s){Promise.resolve().then(s.bind(s,5099))},5099:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var a=s(7437),r=s(9343),n=s(2265),i=s(3360),c=s.n(i),l=s(2908);let o="http://localhost:8000/api";class p extends n.Component{componentDidMount(){this.fetchProjects()}componentDidUpdate(e){e.refreshProjects!==this.props.refreshProjects&&this.fetchProjects()}render(){return(0,a.jsx)("div",{className:"projects-container",children:this.state.projects.map(e=>(0,a.jsxs)("div",{className:"project-box",children:[(0,a.jsxs)("div",{className:"ml-5 float-right",children:[(0,a.jsx)(l.J,{alt:e.title+e.id,className:"project-images",src:e.image?e.image:"/imgs/github.jpg"}),(0,a.jsx)("button",{onClick:()=>{this.handleDelete(e.id)},className:"text-[10px] text-white bg-red-500 w-fit px-2 py-1 rounded-lg mt-2 hover:bg-red-300",children:"Delete"})]}),(0,a.jsxs)("h3",{className:"flex-wrap",children:[(0,a.jsx)("a",{className:" text-blue-500 underline hover:text-blue-300",href:e.link,target:"_blank",children:e.title})," ",(0,a.jsxs)("span",{className:"text-gray-500 text-sm",children:[" by ",e.creator]})]}),(0,a.jsx)("p",{children:e.description})]},e.id))})}constructor(...e){super(...e),this.state={projects:[]},this.fetchProjects=()=>{c().get("".concat(o,"/projects/")).then(e=>{let t=e.data;console.log(e.data),this.setState({projects:t})})},this.handleDelete=e=>{c().delete("".concat(o,"/projects/").concat(e,"/")).then(e=>this.fetchProjects())}}}function d(){let[e,t]=(0,n.useState)(!0),[s,i]=(0,n.useState)(null),[l,o]=(0,n.useState)(!1),[d,h]=(0,n.useState)(!1),[m,u]=(0,n.useState)(0),{register:x,handleSubmit:j,watch:g,reset:f,formState:{errors:N}}=(0,r.cI)();return(0,a.jsxs)("main",{className:"text-center ",children:[(0,a.jsx)("h1",{children:"Dev Depot"}),(0,a.jsxs)("form",{className:"form-box",onSubmit:j(e=>{let t=new FormData;t.append("title",e.title),t.append("creator",e.creator),t.append("description",e.description),t.append("link",e.link),e.image[0]&&t.append("image",e.image[0]),c().post("".concat("http://localhost:8000/api","/projects/"),t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){o(!l),console.log(e),f()}).catch(function(e){console.log(e),400==e.response.status&&h(!0)})}),children:[(0,a.jsx)("input",{className:N.title?"border-red-500":"",maxLength:15,placeholder:"Title",...x("title",{required:!0})}),(0,a.jsx)("input",{className:N.creator?"border-red-500":"",maxLength:15,placeholder:"Creator",...x("creator",{required:!0})}),N.creator&&(0,a.jsx)("span",{children:"Name is required"}),(0,a.jsx)("input",{type:"url",placeholder:"Link",onChange:()=>h(!1),...x("link",{required:!0})}),N.link&&(0,a.jsx)("span",{children:"Link is required"}),d&&!N.link&&(0,a.jsx)("span",{children:"This link has already been used"}),(0,a.jsxs)("div",{className:"flex flex-wrap max-w-[350px] justify-center",children:["Upload an image (optional):",(0,a.jsx)("input",{type:"file",className:"w-fit",accept:"image/png, image/jpeg, image/jpg",...x("image")})]}),(0,a.jsx)("textarea",{className:"w-3/4 max-w-[350px] py-1 px-2 border",placeholder:"Add description. Max: 250 characters",maxLength:250,onKeyUp:e=>{u(e.target.value.length),console.log(e.target.value.length)},...x("description",{required:!0})}),(0,a.jsxs)("p",{className:250==m?"text-red-500":"",children:[N.description&&(0,a.jsx)("span",{className:"mr-2",children:"Description is required"}),m," / 250"]}),(0,a.jsx)("input",{type:"submit"})]}),(0,a.jsx)(p,{refreshProjects:l})]})}}},function(e){e.O(0,[262,971,23,744],function(){return e(e.s=3520)}),_N_E=e.O()}]);